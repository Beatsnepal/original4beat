(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[402],{3613:function(e,t,s){Promise.resolve().then(s.bind(s,6666))},6666:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return l}});var n=s(3827),r=s(4090),o=s(9509),i=s(1654);function l(){let e=(0,o.useUser)(),[t,s]=(0,r.useState)([]),l=(null==e?void 0:e.email)==="beatsnepal74@gmail.com";(0,r.useEffect)(()=>{l&&u()},[e]);let u=async()=>{let{data:e,error:t}=await i.O.from("beats").select("*");t?console.error("Failed to fetch beats:",t):s(e)},a=async e=>{if(!e)return alert("No audio file found.");let{data:t,error:s}=await i.O.storage.from("beats").createSignedUrl(e,60);if(s||!(null==t?void 0:t.signedUrl))return console.error("Download error:",s),alert("Failed to get download link.");window.open(t.signedUrl,"_blank")};return e?l?(0,n.jsxs)("div",{className:"p-6 max-w-4xl mx-auto",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"\uD83C\uDFB5 Admin Beat Downloads"}),0===t.length?(0,n.jsx)("p",{children:"No beats uploaded yet."}):(0,n.jsx)("div",{className:"space-y-4",children:t.map(e=>(0,n.jsxs)("div",{className:"border rounded p-4 flex justify-between items-center",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"font-medium",children:e.name}),(0,n.jsxs)("p",{className:"text-sm text-gray-500",children:["Key: ",e.key," | BPM: ",e.bpm]})]}),(0,n.jsx)("button",{onClick:()=>a(e.audio_path),className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:"Download"})]},e.id))})]}):(0,n.jsx)("div",{className:"p-6 text-red-600",children:"\uD83D\uDEAB Access denied. Admin only."}):(0,n.jsx)("div",{className:"p-6",children:"\uD83D\uDD12 Please log in."})}},1654:function(e,t,s){"use strict";s.d(t,{O:function(){return n}});let n=(0,s(1051).eI)("https://ssaxfvlcpjygsdyymlvy.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNzYXhmdmxjcGp5Z3NkeXltbHZ5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDc1NTgwMTgsImV4cCI6MjA2MzEzNDAxOH0.lpq3C8QCZT3aW3kDb5SgYmr0fS3cvXAyaQDIqsmMDFE")},9509:function(e,t,s){"use strict";var n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,l=(e,t,s)=>new Promise((n,r)=>{var o=e=>{try{l(s.next(e))}catch(e){r(e)}},i=e=>{try{l(s.throw(e))}catch(e){r(e)}},l=e=>e.done?n(e.value):Promise.resolve(e.value).then(o,i);l((s=s.apply(e,t)).next())}),u={};((e,t)=>{for(var s in t)n(e,s,{get:t[s],enumerable:!0})})(u,{SessionContextProvider:()=>f,useSession:()=>p,useSessionContext:()=>m,useSupabaseClient:()=>h,useUser:()=>b}),e.exports=((e,t,s,l)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let s of o(t))i.call(e,s)||void 0===s||n(e,s,{get:()=>t[s],enumerable:!(l=r(t,s))||l.enumerable});return e})(n({},"__esModule",{value:!0}),u);var a=s(4090),d=s(3827),c=(0,a.createContext)({isLoading:!0,session:null,error:null,supabaseClient:{}}),f=e=>{let{supabaseClient:t,initialSession:s=null,children:n}=e,[r,o]=(0,a.useState)(s),[i,u]=(0,a.useState)(!s),[f,m]=(0,a.useState)();(0,a.useEffect)(()=>{!r&&s&&o(s)},[r,s]),(0,a.useEffect)(()=>{let e=!0;return function(){l(this,null,function*(){let{data:{session:s},error:n}=yield t.auth.getSession();if(e){if(n){m(n),u(!1);return}o(s),u(!1)}})}(),()=>{e=!1}},[]),(0,a.useEffect)(()=>{let{data:{subscription:e}}=t.auth.onAuthStateChange((e,t)=>{t&&("SIGNED_IN"===e||"TOKEN_REFRESHED"===e||"USER_UPDATED"===e)&&o(t),"SIGNED_OUT"===e&&o(null)});return()=>{e.unsubscribe()}},[]);let h=(0,a.useMemo)(()=>i?{isLoading:!0,session:null,error:null,supabaseClient:t}:f?{isLoading:!1,session:null,error:f,supabaseClient:t}:{isLoading:!1,session:r,error:null,supabaseClient:t},[i,r,f]);return(0,d.jsx)(c.Provider,{value:h,children:n})},m=()=>{let e=(0,a.useContext)(c);if(void 0===e)throw Error("useSessionContext must be used within a SessionContextProvider.");return e};function h(){let e=(0,a.useContext)(c);if(void 0===e)throw Error("useSupabaseClient must be used within a SessionContextProvider.");return e.supabaseClient}var p=()=>{let e=(0,a.useContext)(c);if(void 0===e)throw Error("useSession must be used within a SessionContextProvider.");return e.session},b=()=>{var e,t;let s=(0,a.useContext)(c);if(void 0===s)throw Error("useUser must be used within a SessionContextProvider.");return null!=(t=null==(e=s.session)?void 0:e.user)?t:null}}},function(e){e.O(0,[51,971,69,744],function(){return e(e.s=3613)}),_N_E=e.O()}]);